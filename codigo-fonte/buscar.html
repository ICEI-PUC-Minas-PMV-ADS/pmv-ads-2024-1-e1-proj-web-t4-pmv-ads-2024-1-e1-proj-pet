<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="images/favicon.png" type="image/x-icon" />
    <title>Pet in a Flat</title>
    <link rel="stylesheet" href="css/lib/bootstrap.min.css" />
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/buscar.css" />
  </head>
  <body>
    <header>
      <nav>
        <img src="images/logoheader.png" alt="Logo" />
        <div class="header-links">
          <a href="index.html" target="_self">Home</a>
          <a href="buscar.html" target="_self">Busca</a>
          <a href="cadastro.html" target="_self">Cadastro</a>
          <a href="login.html" target="_self">Login</a>
          <a href="sobre.html" target="_self">Sobre</a>
        </div>
      </nav>
    </header>
    <main>
      <form id="buscaForm" class="form">
        <div class="content-form container">
          <div class="fields">
            <div class="row">
              <div class="col col-md-4">
                <input
                  id="localizacao"
                  type="text"
                  class="form-control"
                  placeholder="Localização"
                  aria-label="Localização"
                />
              </div>
              <div class="col col-md-4">
                <input
                  id="dataDisponibilidadeInicio"
                  type="date"
                  class="form-control"
                  placeholder="Data de início"
                  aria-label="Data de início"
                />
              </div>
              <div class="col col-md-4">
                <input
                  id="dataDisponibilidadeTermino"
                  type="date"
                  class="form-control"
                  placeholder="Data do término"
                  aria-label="Data do término"
                />
              </div>
            </div>
          </div>
          <button type="submit" class="form-button">Buscar</button>
        </div>
      </form>
      <div class="global-section container">
        <section>
          <div>
            <div id="services">
              <div class="service-option">
                <p>
                  <span
                    ><img src="images/iconetempet.png" alt="Ícone tem/teve pet"
                  /></span>
                  Tem/teve algum pet
                </p>
                <input
                  class="checkbox-group"
                  type="checkbox"
                  name="habilidades[]"
                  value="tutor"
                />
              </div>
              <div class="service-option">
                <p>
                  <span
                    ><img
                      src="images/iconeremedios.png"
                      alt="Ícone administra medicamentos"
                  /></span>
                  Pode administrar medicamentos
                </p>
                <input
                  class="checkbox-group"
                  type="checkbox"
                  name="habilidades[]"
                  value="medicamentos"
                />
              </div>
              <div class="service-option">
                <p>
                  <span
                    ><img
                      src="images/iconeinjecao.png"
                      alt="Ícone aplica injeções"
                  /></span>
                  Pode aplicar injeções
                </p>
                <input
                  class="checkbox-group"
                  type="checkbox"
                  name="habilidades[]"
                  value="injecoes"
                />
              </div>
              <div class="service-option">
                <p>
                  <span
                    ><img
                      src="images/iconefavoritopreto.png"
                      alt="Ícone aplica injeções"
                  /></span>
                  Favorito
                </p>
                <input
                  class="checkbox-group"
                  type="checkbox"
                  name="habilidades[]"
                  value="favorito"
                />
              </div>
            </div>
          </div>
          <div class="map">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d240096.92212872958!2d-43.96405015!3d-19.902716299999998!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xa690cacacf2c33%3A0x5b35795e3ad23997!2sBelo%20Horizonte%2C%20State%20of%20Minas%20Gerais%2C%20Brazil!5e0!3m2!1sen!2snl!4v1714924708959!5m2!1sen!2snl"
              width="900"
              height="600"
              style="border: 0"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
            ></iframe>
          </div>
        </section>
        <section id="resultados"></section>
      </div>
    </main>
    <footer>
      <div class="footer-wrapper">
        <p>© Copyright 2024 Pet in a Flat</p>
        <div class="footer-social">
          <h3>Sigam-nos em nossa redes sociais</h3>
          <div class="footer-links">
            <a href="#">
              <img src="images/facebook.png" alt="Logo Facebook" />
            </a>
            <a href="#">
              <img src="images/instagram.png" alt="Logo Instagram" />
            </a>
          </div>
        </div>
      </div>
    </footer>
    <script src="db/pet_sitters.js"></script>
    <script src="js/busca.js"></script>
    <script>
      (() => {
        const buscaController = new BuscaController();

        const form = document.getElementById("buscaForm");
        const habilidadesCheckboxes =
          document.querySelectorAll(".checkbox-group");

        buscaController.carregarPagina();

        // adiciona um event listener para o form submit
        form.addEventListener("submit", (event) => {
          event.preventDefault();
          buscaController.submit();
        });

        // adiciona um event listener para os checkboxes
        habilidadesCheckboxes.forEach((checkbox) => {
          checkbox.addEventListener("change", (event) => {
            event.preventDefault();
            buscaController.submit();
          });
        });
      })(this);
    </script>
  </body>
</html>
